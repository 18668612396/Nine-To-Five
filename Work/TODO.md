# 葵瓜战记 - 开发计划

> 垂直卷轴射击 + 肉鸽卡牌系统，仅供公司内部AI测试使用

## 当前已完成 ✅

| 功能 | 状态 |
|------|------|
| 基础移动系统 | ✅ |
| 2个可玩角色（瓜瓜、葵葵） | ✅ |
| 自动攻击武器 (单一武器+7种效果) | ✅ |
| 敌人生成 (3种) | ✅ |
| 经验宝石拾取 | ✅ |
| 升级选卡系统 (21张) | ✅ |
| 4种随机场景 | ✅ |
| 基础属性系统 | ✅ |
| 游戏计时器 | ✅ |
| 游戏结束界面 | ✅ |
| 主菜单UI框架 | ✅ |

---

## 需要开发的核心系统 📋

### 1. 卡牌系统扩展
- [ ] **卡牌组合效果（魔法工艺风格）** - 效果修饰器模式，自动组合
  - 元素类：火焰(燃烧DOT)、冰霜(减速)、闪电(连锁)、毒素(叠加)
  - 行为类：散射(多发)、追踪(跟踪)、穿透(不消失)、爆炸(AOE)、分裂(命中分裂)
  - 子弹生成时自动挂载所有已解锁效果，无需预设组合
- [ ] 重构武器系统为修饰器(modifier)模式
- [ ] 更多效果卡牌（目标12-15种）
- [ ] 属性卡牌细化
- [ ] 卡牌稀有度系统（普通/稀有/史诗）

### 2. 角色系统
- [ ] 更多角色（目标6-8个）
- [ ] 角色解锁条件
- [ ] 角色专属武器/技能
- [ ] 角色属性差异化

### 3. 敌人系统
- [ ] 更多敌人种类（目标10+种）
- [ ] 精英怪/小BOSS
- [ ] 最终BOSS（死神机制）
- [ ] 敌人波次系统

### 4. 地图系统
- [ ] 多张地图选择
- [ ] 地图特殊机制
- [ ] 地图解锁条件
- [ ] 地图内道具/宝箱

### 5. 永久成长系统
- [ ] 金币货币系统
- [ ] PowerUp商店（永久属性加成）
- [ ] 角色/武器解锁进度
- [ ] 成就系统

### 6. 游戏内机制
- [ ] 宝箱系统
- [ ] 地图道具（回血、磁铁、炸弹等）
- [ ] 关卡时间事件（特定时间刷怪）
- [ ] 30分钟死神机制
- [ ] 暂停菜单

### 7. 数据持久化
- [ ] 本地存档系统
- [ ] 统计数据记录
- [ ] 解锁进度保存

### 8. 音效/视觉
- [ ] 背景音乐
- [ ] 音效系统
- [ ] 更多粒子特效
- [ ] 屏幕震动效果

---

## 工作量估算

| 模块 | 预估工作量 | 优先级 |
|------|-----------|--------|
| 卡牌组合效果 | 中 | P0 |
| 卡牌系统扩展 | 大 | P0 |
| 角色系统 | 中 | P1 |
| 敌人系统 | 中 | P1 |
| 地图系统 | 大 | P2 |
| 永久成长 | 中 | P1 |
| 游戏内机制 | 中 | P0 |
| 数据持久化 | 小 | P1 |
| 音效视觉 | 中 | P2 |

**总计约 30-40 个功能点需要开发**

---

## 建议开发顺序

1. **卡牌组合效果** - 核心肉鸽玩法，增加策略深度
2. **宝箱/道具系统** - 增加游戏深度
3. **永久成长系统** - 增加重玩性
4. **更多敌人/BOSS** - 丰富战斗体验
5. **地图系统** - 增加内容量
6. **音效视觉** - 打磨体验

---

## 文件结构

```
/Source
  ├── index.html          # 主页面
  ├── /css
  │   └── style.css       # 样式表
  └── /js
      ├── config.js       # 配置和常量（COLORS, UPGRADES等）
      ├── input.js        # 输入处理
      ├── utils.js        # 工具函数
      ├── characters.js   # 角色绘制模块
      ├── scenes.js        # 场景管理模块
      ├── entities.js     # 游戏实体类（Player, Enemy, Gem, Projectile）
      ├── weapons.js      # 主武器系统（单一武器+效果卡牌）
      ├── ui.js           # UI管理模块
      └── game.js         # 游戏引擎核心

/Work
  └── TODO.md             # 开发计划（本文件）
```

### 脚本加载顺序
1. config.js - 配置常量（必须最先加载）
2. utils.js - 工具函数
3. input.js - 输入处理
4. characters.js - 角色绘制（依赖COLORS）
5. scenes.js - 场景管理
6. entities.js - 实体类（依赖COLORS, Input, CharacterRenderer）
7. weapons.js - 主武器系统（依赖Game, Projectile）
8. ui.js - UI管理（依赖CharacterRenderer, Game）
9. game.js - 游戏引擎（依赖所有上述模块）
