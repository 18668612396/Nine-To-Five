<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è‘µç“œå¹¸å­˜è€…</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ»</text></svg>">
    <script>document.write(`<link rel="stylesheet" href="css/style.css?v=__BUILD_TIME__">`)</script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="ui-layer"></div>
    </div>

    <!-- æ ¸å¿ƒ -->
    <script src="js/config.js?v=__BUILD_TIME__"></script>
    <script src="js/utils.js?v=__BUILD_TIME__"></script>
    <script src="js/input.js?v=__BUILD_TIME__"></script>
    <script src="js/core/events.js?v=__BUILD_TIME__"></script>
    
    <!-- UIç³»ç»Ÿ -->
    <script src="js/ui/ui.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/button.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/label.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/panel.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/progress-bar.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/image.js?v=__BUILD_TIME__"></script>
    
    <!-- ç•Œé¢ç³»ç»Ÿ -->
    <script src="js/ui/screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/loading-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/title-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/lobby-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/game-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/gameover-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/inventory-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/settings-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/levelup-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/pause-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/char-select-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/adventure-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/talent-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/collection-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/skill-preload-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/gm-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/weapon-drop-screen.js?v=__BUILD_TIME__"></script>
    
    <!-- åœºæ™¯ç³»ç»Ÿ -->
    <script src="js/scenes/scene-element.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/tree.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/rock.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/bush.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/snow-tree.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/snow-pile.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/cactus.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/seaweed.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/coral.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/grass-scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/snow-scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/desert-scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/ocean-scene.js?v=__BUILD_TIME__"></script>
    
    <!-- éŸ³é¢‘ç³»ç»Ÿ -->
    <script src="js/audio/audio.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/shoot.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/hit.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/kill.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/levelup.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/pickup.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/hurt.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/death.js?v=__BUILD_TIME__"></script>
    
    <!-- åŸºç±» -->
    <script src="js/core/entity.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/skill.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/projectile.js?v=__BUILD_TIME__"></script>
    
    <!-- ä¸»åŠ¨æŠ€èƒ½ -->
    <script src="js/skills/magic/spark-bolt.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/fireball.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/magic-arrow.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/energy-orb.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/magic-missile.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/flying-sword.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/black-hole.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/boomerang.js?v=__BUILD_TIME__"></script>
    
    <!-- è¢«åŠ¨æŠ€èƒ½ -->
    <script src="js/skills/modifiers/scatter.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/homing.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/piercing.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/bouncing.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/damage-plus.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/speed-up.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/explosive.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/lightning-chain.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/reduce-cooldown.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/burn.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/pull.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/thunder.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/poison.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/enlarge.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/reflect.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/split.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/hover.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/light-pillar.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/frenzy.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/rune-hammer.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/prism-core.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/energy-save.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/expand.js?v=__BUILD_TIME__"></script>
    
    <!-- ç¥ç¦ -->
    <script src="js/skills/perks/extra-hp.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/regeneration.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/vampirism.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/damage-boost.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/attack-speed.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/critical-hit.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/movement-speed.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/greed.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/magnet.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/sacrifice.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/luck.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/arcane-barrier.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/energy-siphon.js?v=__BUILD_TIME__"></script>
    
    <!-- æŠ€èƒ½ç³»ç»Ÿå…¥å£ -->
    <script src="js/skills/index.js?v=__BUILD_TIME__"></script>
    
    <!-- æ­¦å™¨ç³»ç»Ÿ -->
    <script src="js/weapons/weapon.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/generator.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/apprentice-wand.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/rapid-wand.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/power-staff.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/trigger-wand.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/inferno-rod.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/storm-caller.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/vampiric-scepter.js?v=__BUILD_TIME__"></script>
    
    <!-- å®ä½“ -->
    <script src="js/entities/player.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/players/guagua.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/players/kuikui.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/enemy.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/gem.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/boss.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/sakura-treant.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/lava-golem.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/abyssal-eye.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/frost-queen.js?v=__BUILD_TIME__"></script>
    
    <!-- æ€ªç‰©ç³»ç»Ÿ -->
    <script src="js/entities/monsters/monster.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/monsters/zombie-normal.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/monsters/zombie-cone.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/monsters/zombie-bucket.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/monsters/zombie-flag.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/monsters/zombie-newspaper.js?v=__BUILD_TIME__"></script>
    
    <!-- æ¸¸æˆç³»ç»Ÿ -->
    <script src="js/game/camera.js?v=__BUILD_TIME__"></script>
    <script src="js/game/renderer.js?v=__BUILD_TIME__"></script>
    <script src="js/game/collision.js?v=__BUILD_TIME__"></script>
    <script src="js/game/spawner.js?v=__BUILD_TIME__"></script>
    <script src="js/game/inventory.js?v=__BUILD_TIME__"></script>
    <script src="js/game/game.js?v=__BUILD_TIME__"></script>
    
    <!-- GMé¢æ¿ -->
    <script src="js/gm.js?v=__BUILD_TIME__"></script>
    
    <!-- å¤§å…ç³»ç»Ÿ -->
    <script src="js/lobby/player-data.js?v=__BUILD_TIME__"></script>
    <script src="js/lobby/talent.js?v=__BUILD_TIME__"></script>
    <script src="js/lobby/lobby.js?v=__BUILD_TIME__"></script>
    
    <!-- åˆå§‹åŒ– -->
    <script>
        // åˆå§‹åŒ–æŠ€èƒ½ç³»ç»Ÿ
        initSkillRegistry();
        initSkillCosts();
        initUpgrades();
        
        // åˆå§‹åŒ–ç•Œé¢ç³»ç»Ÿ
        Screen.Manager.init();
        
        // æ³¨å†Œç•Œé¢å®ä¾‹
        Screen.Manager.register('loading', new LoadingScreen());
        Screen.Manager.register('title', new TitleScreen());
        Screen.Manager.register('lobby', new LobbyScreen());
        Screen.Manager.register('game', new GameScreen());
        Screen.Manager.register('gameover', new GameOverScreen());
        Screen.Manager.register('inventory', new InventoryScreen());
        Screen.Manager.register('settings', new SettingsScreen());
        Screen.Manager.register('levelUp', new LevelUpScreen());
        Screen.Manager.register('pause', new PauseScreen());
        Screen.Manager.register('charSelect', new CharSelectScreen());
        Screen.Manager.register('adventure', new AdventureScreen());
        Screen.Manager.register('talent', new TalentScreen());
        Screen.Manager.register('collection', new CollectionScreen());
        Screen.Manager.register('skillPreload', new SkillPreloadScreen());
        Screen.Manager.register('gm', new GMScreen());
        Screen.Manager.register('weaponDrop', new WeaponDropScreen());
        
        // åˆå§‹åŒ–æ¸¸æˆ
        Game.init();
        GM.init();
        Lobby.init();
        Audio.init();
        
        // å¯åŠ¨åŠ è½½ç•Œé¢
        const loadingScreen = Screen.Manager.get('loading');
        loadingScreen.show();
        
        function updateLoading() {
            if (loadingScreen.active) {
                loadingScreen.update(16);
                requestAnimationFrame(updateLoading);
            }
        }
        updateLoading();
    </script>
</body>
</html>
