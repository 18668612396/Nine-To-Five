<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è‘µç“œå¹¸å­˜è€…</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ»</text></svg>">
    <script>document.write(`<link rel="stylesheet" href="css/style.css?v=__BUILD_TIME__">`)</script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <!-- åŠ è½½ç•Œé¢ -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="loading-icon">ğŸŒ»</div>
            <h1 class="loading-title">è‘µç“œå¹¸å­˜è€…</h1>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
            </div>
            <p class="loading-text">æ­£åœ¨åŠ è½½...</p>
        </div>
    </div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        
        <!-- UIå±‚ -->
        <div id="ui-layer">
            <!-- HUD -->
            <div id="hud" class="hidden">
                <div class="hud-top">
                    <div class="hud-left">
                        <button class="settings-btn" onclick="Game.openSettings()">âš™ï¸</button>
                        <div id="hp-bar-container">
                            <div id="hp-bar-bg">
                                <div id="hp-bar-fill"></div>
                            </div>
                            <div id="hp-text">100/100</div>
                        </div>
                        <div id="xp-bar-container">
                            <div id="xp-bar-bg">
                                <div id="xp-bar-fill"></div>
                            </div>
                            <div id="level-text">Lv.1</div>
                        </div>
                        <div class="weapon-info-row">
                            <div class="weapon-info-display">
                                <span class="weapon-info-icon" id="weapon-icon">ğŸª„</span>
                                <span class="weapon-info-name" id="weapon-name">å­¦å¾’æ³•æ–</span>
                            </div>
                            <div id="weapon-energy-bar-container">
                                <div id="weapon-energy-bar-bg">
                                    <div id="weapon-energy-bar-fill"></div>
                                </div>
                                <div id="weapon-energy-text">100/100</div>
                            </div>
                        </div>
                    </div>
                    <div class="hud-right">
                        <div id="timer">00:00</div>
                        <div id="kill-count">å‡»æ€: 0</div>
                        <div id="gold-count">ğŸ’° 0</div>
                        <button class="inventory-btn" onclick="Game.openInventory()">ğŸ“¦ èƒŒåŒ…</button>
                    </div>
                </div>
            </div>

            <!-- æš‚åœèœå• -->
            <div id="pause-modal" class="screen hidden">
                <div class="pause-container">
                    <h2>â¸ï¸ æš‚åœ</h2>
                    <div class="pause-content">
                        <button class="pause-item" onclick="Game.resumeGame()">
                            <span>â–¶ï¸ ç»§ç»­æ¸¸æˆ</span>
                        </button>
                        <button class="pause-item" onclick="Game.openInventoryFromPause()">
                            <span>ğŸ“¦ èƒŒåŒ…</span>
                        </button>
                        <button class="pause-item" onclick="Game.openGMFromPause()">
                            <span>ï¿½ï¸ GMæŒ‡ä»¤</s>pan>
                        </button>
                        <button class="pause-item" onclick="Game.openSettingsFromPause()">
                            <span>âš™ï¸ è®¾ç½®</span>
                        </button>
                        <button class="pause-item danger" onclick="Game.surrenderGame()">
                            <span>ğŸ³ï¸ æ”¾å¼ƒæˆ˜æ–—</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- æ ‡é¢˜é¡µ -->
            <div id="title-screen" class="screen">
                <div class="title-content">
                    <h1 class="game-title">è‘µç“œå¹¸å­˜è€…</h1>
                    <p class="game-subtitle">KuiGua Survivors</p>
                    <div class="title-char-display">
                        <canvas id="title-char-1" width="120" height="120"></canvas>
                        <canvas id="title-char-2" width="120" height="120"></canvas>
                    </div>
                    <button class="title-btn" onclick="Lobby.enter()">è¿›å…¥æ¸¸æˆ</button>
                    <div class="title-hint">
                        <p>WASD / æ–¹å‘é”® ç§»åŠ¨ | è‡ªåŠ¨æ”»å‡»</p>
                    </div>
                </div>
            </div>

            <!-- å¤§å…ï¼ˆç‹è€…è£è€€é£æ ¼ï¼‰ -->
            <div id="lobby-screen" class="screen hidden">
                <div class="lobby-bg"></div>
                
                <!-- é¡¶éƒ¨æ  -->
                <div class="lobby-top-bar">
                    <div class="player-info">
                        <div class="player-avatar">
                            <canvas id="lobby-avatar" width="50" height="50"></canvas>
                        </div>
                        <div class="player-details">
                            <span class="player-name">ç©å®¶</span>
                            <span class="player-level">Lv.1</span>
                        </div>
                    </div>
                    <div class="currency-display">
                        <div class="currency-item">
                            <span class="currency-icon">ğŸ’°</span>
                            <span class="currency-value" id="lobby-gold">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- ä¸­å¤®è§’è‰²å±•ç¤º -->
                <div class="lobby-center">
                    <canvas id="lobby-char-canvas" width="300" height="350"></canvas>
                    <div class="char-info-panel">
                        <h2 id="lobby-char-name">ç“œç“œ</h2>
                        <p id="lobby-char-stats">é€Ÿåº¦+10%</p>
                    </div>
                </div>
                
                <!-- åº•éƒ¨èœå•æ  -->
                <div class="lobby-bottom-bar">
                    <div class="lobby-nav">
                        <button class="nav-btn" onclick="Lobby.showCharSelect()">
                            <span class="nav-icon">ğŸ‘¤</span>
                            <span class="nav-text">è‹±é›„</span>
                        </button>
                        <button class="nav-btn" onclick="Lobby.showSkillPreload()">
                            <span class="nav-icon">ğŸ”®</span>
                            <span class="nav-text">è£…å¤‡</span>
                        </button>
                        <button class="nav-btn primary" onclick="Lobby.showAdventure()">
                            <span class="nav-icon">âš”ï¸</span>
                            <span class="nav-text">å¼€å§‹</span>
                        </button>
                        <button class="nav-btn" onclick="Lobby.showTalentTree()">
                            <span class="nav-icon">ğŸŒŸ</span>
                            <span class="nav-text">å¤©èµ‹</span>
                        </button>
                        <button class="nav-btn" onclick="Lobby.showCollection()">
                            <span class="nav-icon">ğŸ“–</span>
                            <span class="nav-text">å›¾é‰´</span>
                        </button>
                    </div>
                </div>
                
                <!-- è¿”å›æŒ‰é’® -->
                <button class="lobby-back-btn" onclick="Lobby.backToTitle()">ğŸšª é€€å‡º</button>
            </div>

            <!-- è§’è‰²é€‰æ‹©å¼¹çª— -->
            <div id="char-select-modal" class="screen hidden">
                <div class="modal-container">
                    <div class="modal-header">
                        <h2>ğŸ‘¤ é€‰æ‹©è‹±é›„</h2>
                        <button class="modal-close" onclick="Lobby.closeModal()">âœ•</button>
                    </div>
                    <div class="char-select-grid">
                        <div class="char-card selected" data-char="guagua" onclick="Lobby.selectChar('guagua', this)">
                            <canvas class="char-card-canvas" width="80" height="80" data-char="guagua"></canvas>
                            <div class="char-card-info">
                                <h3>ç“œç“œ</h3>
                                <p>é€Ÿåº¦+10%</p>
                            </div>
                            <div class="char-card-check">âœ“</div>
                        </div>
                        <div class="char-card" data-char="kuikui" onclick="Lobby.selectChar('kuikui', this)">
                            <canvas class="char-card-canvas" width="80" height="80" data-char="kuikui"></canvas>
                            <div class="char-card-info">
                                <h3>è‘µè‘µ</h3>
                                <p>è¡€é‡+20%</p>
                            </div>
                            <div class="char-card-check">âœ“</div>
                        </div>
                    </div>
                    <button class="modal-confirm" onclick="Lobby.confirmChar()">ç¡®è®¤</button>
                </div>
            </div>

            <!-- åˆå§‹æ­¦å™¨é€‰æ‹©å¼¹çª— -->
            <div id="weapon-select-modal" class="screen hidden">
                <div class="modal-container">
                    <div class="modal-header">
                        <h2>ğŸ”® é€‰æ‹©åˆå§‹é­”æ³•</h2>
                        <button class="modal-close" onclick="Lobby.closeModal()">âœ•</button>
                    </div>
                    <div class="weapon-select-grid" id="weapon-select-grid"></div>
                    <button class="modal-confirm" onclick="Lobby.confirmWeapon()">ç¡®è®¤</button>
                </div>
            </div>

            <!-- æŠ€èƒ½é¢„è£…å¼¹çª— -->
            <div id="skill-preload-modal" class="screen hidden">
                <div class="modal-container wide">
                    <div class="modal-header">
                        <h2>ğŸ”® é¢„è£…æŠ€èƒ½</h2>
                        <button class="modal-close" onclick="Lobby.closeModal()">âœ•</button>
                    </div>
                    <div class="preload-content">
                        <p class="preload-hint">é€‰æ‹©å¼€å±€æºå¸¦çš„æŠ€èƒ½ï¼ˆ1æ˜Ÿï¼‰</p>
                        <div class="preload-slots-container">
                            <h4>æŠ€èƒ½æ§½ä½</h4>
                            <div id="preload-slots" class="preload-slots"></div>
                        </div>
                        <div class="preload-skills-container">
                            <h4>å¯é€‰æŠ€èƒ½</h4>
                            <div id="preload-skills-grid" class="preload-skills-grid"></div>
                        </div>
                    </div>
                    <button class="modal-confirm" onclick="Lobby.confirmSkillPreload()">ç¡®è®¤</button>
                </div>
            </div>

            <!-- å¤©èµ‹æ ‘å¼¹çª— -->
            <div id="talent-modal" class="screen hidden">
                <div class="modal-container wide">
                    <div class="modal-header">
                        <h2>ğŸŒŸ å¤©èµ‹æ ‘</h2>
                        <div class="talent-gold">ğŸ’° <span id="talent-gold">0</span></div>
                        <button class="modal-close" onclick="Lobby.closeModal()">âœ•</button>
                    </div>
                    <div class="talent-grid" id="talent-grid"></div>
                    <p class="talent-hint">æ¶ˆè€—é‡‘å¸æ°¸ä¹…å¼ºåŒ–è§’è‰²å±æ€§</p>
                </div>
            </div>

            <!-- å›¾é‰´å¼¹çª— -->
            <div id="collection-modal" class="screen hidden">
                <div class="modal-container wide">
                    <div class="modal-header">
                        <h2>ğŸ“– å›¾é‰´</h2>
                        <button class="modal-close" onclick="Lobby.closeModal()">âœ•</button>
                    </div>
                    <div class="collection-content">
                        <div class="collection-tabs">
                            <button class="collection-tab active" onclick="Lobby.showCollectionTab('characters', this)">ğŸ‘¤ è§’è‰²</button>
                            <button class="collection-tab" onclick="Lobby.showCollectionTab('enemies', this)">ğŸ‘¹ æ•Œäºº</button>
                            <button class="collection-tab" onclick="Lobby.showCollectionTab('skills', this)">ğŸ”® æŠ€èƒ½</button>
                        </div>
                        <div id="collection-grid" class="collection-grid"></div>
                    </div>
                </div>
            </div>

            <!-- å†’é™©é€‰æ‹©ç•Œé¢ -->
            <div id="adventure-screen" class="screen hidden">
                <div class="adventure-container">
                    <div class="adventure-header">
                        <h2>âš”ï¸ å†’é™©</h2>
                        <button class="adventure-back" onclick="Lobby.closeAdventure()">â† è¿”å›</button>
                    </div>
                    <div class="adventure-content">
                        <div class="adventure-section">
                            <h3>éš¾åº¦</h3>
                            <div class="difficulty-options">
                                <div class="difficulty-option selected" data-diff="easy" onclick="Lobby.selectDifficulty('easy', this)">
                                    <span class="diff-icon">ğŸŒ±</span>
                                    <span class="diff-name">ç®€å•</span>
                                </div>
                                <div class="difficulty-option" data-diff="normal" onclick="Lobby.selectDifficulty('normal', this)">
                                    <span class="diff-icon">âš”ï¸</span>
                                    <span class="diff-name">æ™®é€š</span>
                                </div>
                                <div class="difficulty-option" data-diff="hard" onclick="Lobby.selectDifficulty('hard', this)">
                                    <span class="diff-icon">ğŸ’€</span>
                                    <span class="diff-name">å›°éš¾</span>
                                </div>
                            </div>
                        </div>
                        <div class="adventure-section">
                            <h3>åœ°å›¾</h3>
                            <div class="map-options">
                                <div class="map-option selected" data-map="random" onclick="Lobby.selectMap('random', this)">
                                    <span class="map-icon">ğŸ²</span>
                                    <span class="map-name">éšæœº</span>
                                </div>
                                <div class="map-option" data-map="forest" onclick="Lobby.selectMap('forest', this)">
                                    <span class="map-icon">ğŸŒ²</span>
                                    <span class="map-name">æ£®æ—</span>
                                </div>
                                <div class="map-option" data-map="desert" onclick="Lobby.selectMap('desert', this)">
                                    <span class="map-icon">ğŸœï¸</span>
                                    <span class="map-name">æ²™æ¼ </span>
                                </div>
                                <div class="map-option" data-map="snow" onclick="Lobby.selectMap('snow', this)">
                                    <span class="map-icon">â„ï¸</span>
                                    <span class="map-name">é›ªåœ°</span>
                                </div>
                            </div>
                        </div>
                        <button class="adventure-start-btn" onclick="Lobby.startAdventure()">ğŸš€ å‡ºå‘ï¼</button>
                    </div>
                </div>
            </div>

            <!-- å‡çº§ç•Œé¢ -->
            <div id="levelup-screen" class="screen hidden">
                <h2>å‡çº§! Lv.<span id="levelup-level"></span></h2>
                <p>é€‰æ‹©ä¸€ä¸ªå¼ºåŒ–</p>
                <div id="cards-container"></div>
            </div>

            <!-- æ¸¸æˆç»“æŸç•Œé¢ -->
            <div id="gameover-screen" class="screen hidden">
                <h1>æ¸¸æˆç»“æŸ</h1>
                <div class="gameover-stats">
                    <div class="stats-main">
                        <p>â±ï¸ å­˜æ´»æ—¶é—´: <span id="final-time"></span></p>
                        <p>ğŸ’€ å‡»æ€æ•°é‡: <span id="final-kills"></span></p>
                        <p class="gold-earned">ğŸ’° è·å¾—é‡‘å¸: <span id="final-gold">0</span></p>
                    </div>
                    <div class="stats-detail">
                        <div class="stat-item">
                            <span class="stat-label">â¬†ï¸ æœ€ç»ˆç­‰çº§</span>
                            <span class="stat-value" id="final-level">1</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">âš”ï¸ é€ æˆä¼¤å®³</span>
                            <span class="stat-value" id="final-damage">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ğŸ’” æ‰¿å—ä¼¤å®³</span>
                            <span class="stat-value" id="final-taken">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ğŸ‘¹ Bosså‡»æ€</span>
                            <span class="stat-value" id="final-boss">0</span>
                        </div>
                    </div>
                </div>
                <div class="gameover-btns">
                    <button onclick="Lobby.enter()">è¿”å›å¤§å…</button>
                    <button onclick="Lobby.restartGame()">å†æ¥ä¸€å±€</button>
                </div>
            </div>
            
            <!-- èƒŒåŒ…ç•Œé¢ -->
            <div id="inventory-screen" class="screen hidden">
                <!-- å·¦ä¸Šè§’è¿”å›æŒ‰é’® -->
                <button class="inv-back-btn" onclick="Game.closeInventory()">â† è¿”å›</button>
                <!-- å³ä¸Šè§’è®¾ç½®æŒ‰é’® -->
                <button class="inv-settings-btn" onclick="Game.openSettingsFromInventory()">âš™ï¸ è®¾ç½®</button>
                <!-- å³ä¸‹è§’æ”¾å¼ƒæŒ‰é’® -->
                <button class="inv-surrender-btn" onclick="Game.surrenderGame()">ğŸ³ï¸ æ”¾å¼ƒæˆ˜æ–—</button>
                
                <div class="inventory-layout">
                    <div class="inventory-container">
                        <div class="inventory-header">
                            <h2>âš”ï¸ æŠ€èƒ½ç¼–è¾‘</h2>
                            <div class="inventory-header-btns">
                                <button class="merge-btn" id="workbench-toggle-btn" onclick="Game.toggleWorkbench()">ğŸ”§ å·¥ä½œå°</button>
                            </div>
                        </div>
                        
                        <!-- æ­¦å™¨+æŠ€èƒ½æ§½åŒºåŸŸï¼ˆä¸‰è¡Œï¼‰ -->
                        <div class="inventory-section weapon-wand-section">
                            <h3>ğŸ—¡ï¸ æ­¦å™¨ä¸æŠ€èƒ½æ§½ <span class="weapon-switch-hint">(æŒ‰Qåˆ‡æ¢æ­¦å™¨)</span></h3>
                            <div id="weapon-wand-rows" class="weapon-wand-container"></div>
                        </div>
                        
                        <div class="inventory-section">
                            <h3>ğŸ“¦ æŠ€èƒ½èƒŒåŒ…</h3>
                            <div id="inventory-items" class="inventory-grid"></div>
                        </div>
                        <div class="inventory-section">
                            <h3>ğŸ ç¥ç¦</h3>
                            <div id="perks-display" class="perks-grid"></div>
                        </div>
                        
                        <!-- æ­¦å™¨èƒŒåŒ…åŒºåŸŸ -->
                        <div class="inventory-section weapon-inventory-section">
                            <h3>ğŸ’ æ­¦å™¨èƒŒåŒ…</h3>
                            <div id="weapon-inventory" class="weapon-inventory-grid"></div>
                        </div>
                    </div>
                    <div class="workbench-panel hidden" id="workbench-panel">
                        <div class="workbench-header"><h3>ğŸ”§ å·¥ä½œå°</h3></div>
                        <div class="workbench-slots">
                            <div class="workbench-slot" id="workbench-slot-0" onclick="Game.removeFromWorkbench(0)"></div>
                            <div class="workbench-slot" id="workbench-slot-1" onclick="Game.removeFromWorkbench(1)"></div>
                            <div class="workbench-slot" id="workbench-slot-2" onclick="Game.removeFromWorkbench(2)"></div>
                        </div>
                        <div class="workbench-arrow-down">â¬‡</div>
                        <div class="workbench-result" id="workbench-result"></div>
                        <div class="workbench-tip" id="workbench-tip">â€¢ 3ä¸ªç›¸åŒ â†’ å‡æ˜Ÿ<br>â€¢ 2ä¸ªä¸åŒ â†’ éšæœº</div>
                        <button class="workbench-craft-btn" id="workbench-craft-btn" onclick="Game.doCraft()" disabled>åˆæˆ</button>
                        <button class="workbench-auto-btn" onclick="Game.autoMergeAll()">âš¡ ä¸€é”®åˆæˆ</button>
                    </div>
                </div>
            </div>
            
            <!-- è®¾ç½®èœå• -->
            <div id="settings-modal" class="screen hidden">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2>âš™ï¸ è®¾ç½®</h2>
                        <button class="modal-close" onclick="Game.closeSettings()">âœ•</button>
                    </div>
                    <div class="settings-content">
                        <button class="settings-item" onclick="GM.openPanel(); Game.closeSettingsOnly();">
                            <span>ğŸ› ï¸ GMæŒ‡ä»¤</span>
                        </button>
                        <p class="coming-soon">ğŸš§ æ›´å¤šè®¾ç½®å¼€å‘ä¸­...</p>
                    </div>
                </div>
            </div>
            
            <!-- GMé¢æ¿ -->
            <div id="gm-modal" class="screen hidden">

            <!-- æ­¦å™¨é€‰æ‹©å¼¹çª—ï¼ˆBossæ‰è½ï¼‰ -->
            <div id="weapon-drop-modal" class="screen hidden">
                <div class="weapon-drop-container">
                    <h2>ğŸ é€‰æ‹©æ­¦å™¨</h2>
                    <p class="weapon-drop-hint">å‡»è´¥Bossè·å¾—æ­¦å™¨å¥–åŠ±ï¼é€‰æ‹©ä¸€æŠŠæˆ–è·³è¿‡éšæœºè·å¾—</p>
                    <div id="weapon-drop-options" class="weapon-drop-grid"></div>
                    <button class="weapon-skip-btn" onclick="Game.skipWeaponDrop()">ğŸ² è·³è¿‡ï¼Œéšæœºè·å¾—</button>
                </div>
            </div>
                <div class="gm-modal-container">
                    <div class="gm-header">
                        <h2>ğŸ› ï¸ GM</h2>
                        <button class="gm-close-btn" onclick="GM.closePanel()">âœ•</button>
                    </div>
                    <div class="gm-section">
                        <h4>ï¿½ é‡‘å¸</hh4>
                        <div class="gm-gold-btns">
                            <button class="gm-btn gold-type" onclick="GM.addGold(100)">+100</button>
                            <button class="gm-btn gold-type" onclick="GM.addGold(1000)">+1000</button>
                            <button class="gm-btn gold-type" onclick="GM.addGold(10000)">+10000</button>
                        </div>
                    </div>
                    <div class="gm-section">
                        <h4>ğŸ‘¹ å¬å”¤Boss</h4>
                        <div class="gm-boss-btns">
                            <button class="gm-btn boss-type" onclick="GM.spawnBoss('sakura_treant')">ğŸŒ¸ æ¨±èŠ±æ ‘å¦–</button>
                            <button class="gm-btn boss-type" onclick="GM.spawnBoss('lava_golem')">ğŸ”¥ ç†”å²©å·¨äºº</button>
                            <button class="gm-btn boss-type" onclick="GM.spawnBoss('abyssal_eye')">ğŸ‘ï¸ æ·±æ¸Šä¹‹çœ¼</button>
                            <button class="gm-btn boss-type" onclick="GM.spawnBoss('frost_queen')">â„ï¸ å†°éœœå¥³ç‹</button>
                        </div>
                    </div>
                    <div class="gm-section">
                        <h4>ğŸ”¥ é­”æ³•</h4>
                        <div id="gm-magic-list" class="gm-list"></div>
                    </div>
                    <div class="gm-section">
                        <h4>ğŸ’  è¢«åŠ¨</h4>
                        <div id="gm-modifier-list" class="gm-list"></div>
                    </div>
                    <div class="gm-section">
                        <h4>ğŸ ç¥ç¦</h4>
                        <div id="gm-perk-list" class="gm-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸåŠ è½½è¿›åº¦
        const loadingBar = document.querySelector('.loading-bar');
        const loadingText = document.querySelector('.loading-text');
        let progress = 0;
        
        const loadingInterval = setInterval(() => {
            progress += Math.random() * 15 + 5;
            if (progress >= 100) {
                progress = 100;
                clearInterval(loadingInterval);
                loadingText.textContent = 'åŠ è½½å®Œæˆ!';
                
                setTimeout(() => {
                    document.getElementById('loading-screen').classList.add('fade-out');
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.display = 'none';
                    }, 500);
                }, 300);
            }
            loadingBar.style.width = progress + '%';
            loadingText.textContent = 'æ­£åœ¨åŠ è½½... ' + Math.floor(progress) + '%';
        }, 100);
    </script>
    
    <!-- åŠ è½½æ‰€æœ‰æ¸¸æˆè„šæœ¬ -->
    <!-- æ ¸å¿ƒ -->
    <script src="js/config.js?v=__BUILD_TIME__"></script>
    <script src="js/utils.js?v=__BUILD_TIME__"></script>
    <script src="js/input.js?v=__BUILD_TIME__"></script>
    <script src="js/core/events.js?v=__BUILD_TIME__"></script>
    
    <!-- UIç³»ç»Ÿ -->
    <script src="js/ui/ui.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/button.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/label.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/panel.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/progress-bar.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/elements/image.js?v=__BUILD_TIME__"></script>
    
    <!-- ç•Œé¢ç³»ç»Ÿ -->
    <script src="js/ui/screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/title-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/lobby-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/game-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/gameover-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/inventory-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/settings-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/levelup-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/pause-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/char-select-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/adventure-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/talent-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/collection-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/skill-preload-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/gm-screen.js?v=__BUILD_TIME__"></script>
    <script src="js/ui/screens/weapon-drop-screen.js?v=__BUILD_TIME__"></script>
    
    <!-- åœºæ™¯ç³»ç»Ÿ -->
    <script src="js/scenes/scene-element.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/tree.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/rock.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/bush.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/snow-tree.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/snow-pile.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/cactus.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/seaweed.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/elements/coral.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/grass-scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/snow-scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/desert-scene.js?v=__BUILD_TIME__"></script>
    <script src="js/scenes/types/ocean-scene.js?v=__BUILD_TIME__"></script>
    
    <!-- éŸ³é¢‘ç³»ç»Ÿ -->
    <script src="js/audio/audio.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/shoot.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/hit.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/kill.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/levelup.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/pickup.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/hurt.js?v=__BUILD_TIME__"></script>
    <script src="js/audio/sounds/death.js?v=__BUILD_TIME__"></script>
    
    <!-- åŸºç±» -->
    <script src="js/core/entity.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/skill.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/projectile.js?v=__BUILD_TIME__"></script>
    
    <!-- ä¸»åŠ¨æŠ€èƒ½ -->
    <script src="js/skills/magic/spark-bolt.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/fireball.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/magic-arrow.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/energy-orb.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/magic-missile.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/flying-sword.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/magic/black-hole.js?v=__BUILD_TIME__"></script>
    
    <!-- è¢«åŠ¨æŠ€èƒ½ -->
    <script src="js/skills/modifiers/scatter.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/homing.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/piercing.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/bouncing.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/damage-plus.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/speed-up.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/explosive.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/lightning-chain.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/reduce-cooldown.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/burn.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/pull.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/thunder.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/poison.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/enlarge.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/reflect.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/split.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/hover.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/light-pillar.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/frenzy.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/rune-hammer.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/modifiers/prism-core.js?v=__BUILD_TIME__"></script>
    
    <!-- ç¥ç¦ -->
    <script src="js/skills/perks/extra-hp.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/regeneration.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/vampirism.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/damage-boost.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/attack-speed.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/critical-hit.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/movement-speed.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/greed.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/magnet.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/sacrifice.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/luck.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/arcane-barrier.js?v=__BUILD_TIME__"></script>
    <script src="js/skills/perks/energy-siphon.js?v=__BUILD_TIME__"></script>
    
    <!-- æŠ€èƒ½ç³»ç»Ÿå…¥å£ï¼ˆå…¼å®¹å±‚ï¼‰ -->
    <script src="js/skills/index.js?v=__BUILD_TIME__"></script>
    
    <!-- æ­¦å™¨ç³»ç»Ÿ -->
    <script src="js/weapons/weapon.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/generator.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/apprentice-wand.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/rapid-wand.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/power-staff.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/trigger-wand.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/inferno-rod.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/storm-caller.js?v=__BUILD_TIME__"></script>
    <script src="js/weapons/templates/vampiric-scepter.js?v=__BUILD_TIME__"></script>
    
    <!-- è§’è‰²ç»˜åˆ¶ï¼ˆéœ€è¦åœ¨ç©å®¶ç±»ä¹‹å‰åŠ è½½ï¼‰ -->
    <script src="js/characters.js?v=__BUILD_TIME__"></script>
    
    <!-- å®ä½“ -->
    <script src="js/entities/player.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/players/guagua.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/players/kuikui.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/enemy.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/gem.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/boss.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/sakura-treant.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/lava-golem.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/abyssal-eye.js?v=__BUILD_TIME__"></script>
    <script src="js/entities/bosses/frost-queen.js?v=__BUILD_TIME__"></script>
    
    <!-- æ¸¸æˆç³»ç»Ÿ -->
    <script src="js/game/camera.js?v=__BUILD_TIME__"></script>
    <script src="js/game/renderer.js?v=__BUILD_TIME__"></script>
    <script src="js/game/collision.js?v=__BUILD_TIME__"></script>
    <script src="js/game/spawner.js?v=__BUILD_TIME__"></script>
    <script src="js/game/inventory.js?v=__BUILD_TIME__"></script>
    <script src="js/game/game.js?v=__BUILD_TIME__"></script>
    
    <!-- GMé¢æ¿ -->
    <script src="js/gm.js?v=__BUILD_TIME__"></script>
    
    <!-- å¤§å…ç³»ç»Ÿ -->
    <script src="js/lobby/player-data.js?v=__BUILD_TIME__"></script>
    <script src="js/lobby/talent.js?v=__BUILD_TIME__"></script>
    <script src="js/lobby/lobby.js?v=__BUILD_TIME__"></script>
    
    <!-- åˆå§‹åŒ–æ¸¸æˆ -->
    <script>
        // åˆå§‹åŒ–æŠ€èƒ½ç³»ç»Ÿ
        initSkillRegistry();
        initSkillCosts();
        initUpgrades();
        
        // åˆå§‹åŒ–ç•Œé¢ç³»ç»Ÿ
        Screen.Manager.init();
        
        // æ³¨å†Œç•Œé¢å®ä¾‹
        Screen.Manager.register('title', new TitleScreen());
        Screen.Manager.register('lobby', new LobbyScreen());
        Screen.Manager.register('game', new GameScreen());
        Screen.Manager.register('gameover', new GameOverScreen());
        Screen.Manager.register('inventory', new InventoryScreen());
        Screen.Manager.register('settings', new SettingsScreen());
        Screen.Manager.register('levelUp', new LevelUpScreen());
        Screen.Manager.register('pause', new PauseScreen());
        Screen.Manager.register('charSelect', new CharSelectScreen());
        Screen.Manager.register('adventure', new AdventureScreen());
        Screen.Manager.register('talent', new TalentScreen());
        Screen.Manager.register('collection', new CollectionScreen());
        Screen.Manager.register('skillPreload', new SkillPreloadScreen());
        Screen.Manager.register('gm', new GMScreen());
        Screen.Manager.register('weaponDrop', new WeaponDropScreen());
        
        // åˆå§‹åŒ–æ¸¸æˆ
        Game.init();
        GM.init();
        Lobby.init();
        Audio.init();
    </script>
</body>
</html>
